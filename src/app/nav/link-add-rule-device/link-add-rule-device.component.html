<div class="row formModal">
    <div class="col-lg-12 add-form p-2">
      <div class=" heading-container d-flex justify-content-between align-items-center">
        <a class="close-main pointer" (click)="closeForm()"><img src="assets/icons/cancel_24dp_999999.svg" alt="" width="28px"></a>
        <span class="form-heading" style="color: #989fb4;" (click)="openRuleForm()">Add Rule</span>
      </div>

      <div class="row main-container">
        <div class="col-lg-6">
            <div class="d-flex justify-content-between align-items-center">
                <div class=" d-flex flex-row mb-2 mt-1">
                    <img [src]="currentAdd.snapUrl"  alt="" width="20px">
                   <div class="ms-3">
                     <p class="add-name" style="color: red;">{{currentAdd.adName}}</p>
                     <p class="bevarege">{{currentAdd.category}}</p>
                   </div>
                 </div>
         
                 <div>
                    <button type="button" class="btn btn-outline-secondary me-2" (click)="openViewAddForm(currentAdd)">PLAY</button>
                    <!-- <button type="button" class="btn btn-outline-secondary me-2" (click)="openAdverForm()">PLAY</button> -->
                    <!-- <button type="button" class="btn btn-outline-success">ACTIVE</button> -->
                 </div>
            </div>

            <div class="d-flex justify-content-between align-items-center">
                <p class="total-devices">TOTAL DEVICES - {{devicesData.length}}</p>
                <div class="col-6 mt-1">
                    <mat-form-field appearance="outline" class="w-100">
                      <mat-label>Search</mat-label>
                      <input matInput type="text" [(ngModel)]="deviceSearch">
                    </mat-form-field>
                  </div>
            </div>

           <div class="device-main-container">
            @for (item of devicesData | search: deviceSearch; track $index) {
                <div class="device-container d-flex justify-content-between align-items-center">
                    <div class="d-flex flex-row">
                        <img [src]="item.img" alt="" width="20px" class="me-2">
                    <div>
                        <p class="device-heading">{{item.deviceName}}</p>
                        <p class="device-details">{{item.deviceId}}</p>
                    </div>
                    </div>
    
                    <p class="device-details">{{item.main}}</p>
    
                   @if (item.associationStatus === 1) {
                    <button type="button" class="btn btn-success">Associated</button>
                   }
                <div (click)="openRuleFormFor()">
                  @if (item.associationStatus === 0) {
                    <button type="button" class="btn btn-success" >Not Associated(+)</button>
                  }
                </div>
                     
    
                </div>
            }
             
           </div>
        </div>

        <div class="col-lg-6">
            <div class="d-flex justify-content-between align-items-center mt-5">
                <p class="rules-heading">RULES - {{rulesData.length}}</p>
            <!-- <div class="col-6 mt-1">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Search</mat-label>
                  <input matInput type="text" [(ngModel)]="ruleSearch">
                </mat-form-field>
              </div> -->
            </div>

        <div class="rules-side-container">
            @for (item of rulesData | search: ruleSearch; track $index) {
                <div class="rules-container">
                   <div class="d-flex justify-content-between align-items-center mb-3">
                    <p class="rule-sub-heading">RULE - 2</p>
                    <p class="rule-sub-heading">Date : 01/09/2024 - 31/12/2024</p>
                   </div>
                   <div  class="d-flex justify-content-between align-items-center">
                    <div class="d-flex">
                        
                        <div class="me-3">
                            <p class="sunday-heading">Working Days</p>
                            <div class="d-flex flex-row justify-content-start">
                              @for (day of item.workingDays; track $index) {
                                <div class="day-container m-1">
                                  <p class="sunday-heading">{{day}}</p>
                                </div>
                              }
                            </div>
                        </div>
                      
                       <div class="me-3">
                        <p  class="sunday-heading">Time</p>
                        <div class="day-container m-1">
                            <p class="sunday-heading">{{item.adHours}}</p>
                        </div>
                       </div>
                         
                         <div class="me-3">
                            <p  class="sunday-heading">Temp</p>
                            <div class="day-container m-1">
                                <p class="sunday-heading">{{item.temp}}</p>
                            </div>
                         </div>
                        
                       <div class="me-3">
                        <p  class="sunday-heading">Object</p>
                        <div class="day-container m-1">
                            <p class="sunday-heading">{{item.objectCount}}</p>
                        </div>
                       </div>
                        
                        <div class="me-3">
                            <p  class="sunday-heading ms-1">Camera</p>
                            <div class="day-container m-1">
                              <select class="form-control custom-form-control" [(ngModel)]="item.objectType">
                                @for (status of getType(7); track $index) {
                                  <option [value]="status.keyId">{{status.value}}</option>
                                }
                              </select>
                            </div>
                        </div>
                        <!-- <div class="col-lg-2">
                          <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Choose a date</mat-label>
                            <input matInput [matDatepicker]="picker1">
                      
                            <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                          </mat-form-field>
                        </div>
                        <div class="col-lg-2">
                          <mat-form-field appearance="outline" class="w-100">
                            <mat-label>Choose a date</mat-label>
                            <input matInput [matDatepicker]="picker2">
                            <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                          </mat-form-field>
                       </div> -->
                     </div>
                     <div>
                      <button class="btn btn-success"></button>
                            <!-- <section class="example-section">
                              <mat-slide-toggle
                                  class="example-margin"
                                  [checked]="checked"
                                  [disabled]="disabled">
                              </mat-slide-toggle>
                            </section> -->
                     </div>
                   </div>
                  
                </div>
            }
        </div>
        </div>
      </div>
    </div>
  
  </div>
  
  
  <!-- @if (showDeviceForm) {
    <div>
        <app-add-device (newItemEvent)="closeDeviceForm()"></app-add-device>
    </div>
  }
  
  
  @if (showRuleForm) {
    <div>
      <app-new-rule (newItemEvent)="closeRuleForm()"></app-new-rule>
    </div>
  } -->

  @if(viewAddForm) {
    <div class="m-4">
        <app-view-advertisement [adsData]="currentAdd" (newItemEvent)="closeViewForm()"></app-view-advertisement> 
    </div>
}



@if (showRuleForm) {
  <div>
    <app-create-new-rule [inputData]="currentAdd" (newItemEvent)="closeRuleForm()"></app-create-new-rule>
  </div>
} 



<ng-template #addNewRuleForm>
  <div style="background-color: #989fb4;" class="p-4">
   <div class="d-flex flex-row">
    <img src="assets/icons/camera-white.svg" alt="">
   <div class="ms-3 mb-3">
    <p>PEPSI</p>
   <p>Beverage | 12 Sec</p>
   </div>
   </div>
 
   <div style="background-color: gainsboro" class="d-flex justify-content-between align-items-center p-2">
    <p>Device Name - 9</p>
   <p >RULE - 2</p>
   </div>
  </div>

 <mat-dialog-content >
 <div class="row">
  <div class="col-lg-6">
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Choose a date</mat-label>
      <input matInput [matDatepicker]="picker1">

      <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
      <mat-datepicker #picker1></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="col-lg-6">
    <mat-form-field appearance="outline" class="w-100">
      <mat-label>Choose a date</mat-label>
      <input matInput [matDatepicker]="picker2">
      <mat-datepicker-toggle matIconSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2></mat-datepicker>
    </mat-form-field>
 </div>

 <div class="text-center">
  <button class="btn btn-secondary mx-2" mat-dialog-close>Cancle</button>
  <button class="btn btn-secondary">Submit</button>
 </div>
 </div>
 </mat-dialog-content>
</ng-template>

